<!doctype html>
<html lang="zh-Hant-TW">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>招募專區｜INFAS 2026</title>
<link rel="stylesheet" href="assets/css/style.css">
<style>
:root {
  --gap: 2rem;
  --toc-w: 260px;
  --nav-h: 64px;
  --ring: 0 0 0 3px rgba(59,130,246,.45);
}
.markdown-body { max-width: unset; }
.markdown-body img { max-width: 100%; height: auto; }
.task-list-item { list-style: none; }
.task-list-item input { margin-right: .5rem; }

/* Callout */
.callout { border-left: 4px solid; border-radius: 12px; padding: .9rem 1rem; margin: 1rem 0; background-color: #f9f9f9; }
.callout .title { display:block; font-weight:700; margin-bottom:.35rem; }
.callout.note { border-color:#2d7df6;background-color:#f0f5ff;color:#1e3a8a;}
.callout.tip { border-color:#059669;background-color:#f0fdf4;color:#065f46;}
.callout.important { border-color:#dc2626;background-color:#fef2f2;color:#991b1b;}
.callout.warning { border-color:#f97316;background-color:#fff7ed;color:#b45309;}
.callout.caution { border-color:#eab308;background-color:#fefce8;color:#92400e;}
.callout img, .callout iframe, .callout video, .callout audio { max-width: 100%; height:auto; }

/* TOC */
#toc a { transition: color .15s ease, font-weight .15s ease; color:#555; text-decoration:none; display:block; padding:.2rem .25rem; border-radius:6px; }
#toc a:hover, #toc a:focus-visible { color:#111; outline:none; box-shadow: var(--ring); }
#toc a.active { color:#000 !important; font-weight:600; background-color: rgba(0,0,0,.06);}
#toc ul { list-style:none; padding-left:0; margin:0;}
#toc li { position:relative;}
#toc ul ul { overflow:hidden; max-height:0; transition:max-height .25s ease; padding-left:.75rem; } /* 初始收起 */
.toc-item { display:grid; grid-template-columns:1.25rem 1fr; align-items:center; gap:.25rem; }
.toc-caret { width:1rem;height:1rem;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;border:none;background:transparent;padding:0;line-height:1;}
.toc-caret-icon { display:inline-block; transform:rotate(-90deg); transition: transform .2s ease; }
.toc-caret[aria-expanded="true"] .toc-caret-icon { transform: rotate(0deg); }

/* 標題避免被導覽遮住 */
h1,h2,h3,h4 { scroll-margin-top: calc(var(--nav-h)+20px);}
.markdown-body h1 { display:block; font-size:2.2rem; font-weight:700; line-height:1.2; margin:2rem 0 1.5rem 0; color:#1a1a1a; border-bottom:none; }

/* Layout */
#content { display:grid; grid-template-columns: var(--toc-w) 1fr; gap:var(--gap);}
aside[aria-label="頁面目錄"] { position:sticky; top:calc(var(--nav-h)+16px); align-self:start; }

/* RWD */
@media (max-width:1024px){ :root { --gap:1.25rem; --toc-w:220px; } }
@media (max-width:768px){ #content{grid-template-columns:1fr;} aside[aria-label="頁面目錄"]{position:static;} #toc .toc-caret{display:none;} #toc ul ul{max-height:none !important;} }
</style>
</head>
<body>
<header class="nav" role="banner" style="min-height:var(--nav-h)">
  <div class="nav-inner">
    <a class="brand" href="index.html" aria-label="INFAS 首頁"><img src="./favicon256.png" width="36" height="36" alt="INFAS logo"><strong>INFAS 2026</strong></a>
    <nav aria-label="主導覽">
      <div class="nav-links">
        <a href="about.html">關於</a>
        <a href="recruit.html" aria-current="page">招募</a>
        <a href="sponsor.html">贊助</a>
        <a href="policy/privacy.html">隱私權</a>
        <a href="index.html#contact">聯絡</a>
      </div>
    </nav>
  </div>
</header>

<main id="main">
<section class="hero" aria-label="招募">
  <div class="hero-inner">
    <span class="badge"><span class="badge-dot" aria-hidden="true"></span>招募專區 · 內容即時同步</span>
    <div>
      <h1>加入 INFAS 2026 籌備團隊</h1>
      <p>職缺、分工、時程、常見問答</p>
      <div class="cta-row">
        <a class="btn btn-primary" href="#content">查看招募資訊</a>
      </div>
    </div>
  </div>
</section>

<section class="section" aria-label="招募內容">
  <div class="container" id="content">
    <aside aria-label="頁面目錄">
      <h2 style="margin-top:0">目錄</h2>
      <nav id="toc" class="foot-links" aria-label="章節導覽"></nav>
    </aside>
    <article id="md-root" class="markdown-body" aria-live="polite" aria-busy="true">
      <!-- 這裡可以直接貼 HackMD markdown -->
      ## H2 範例標題 1
      ### H3 子標題
      內容文字...
      ## H2 範例標題 2
      ### H3 子標題
      內容文字...
    </article>
  </div>
</section>
</main>

<footer role="contentinfo">
  <div class="footer-inner">© 2026 INFAS. All rights reserved.</div>
</footer>

<script type="module">
import { marked } from 'https://cdn.jsdelivr.net/npm/marked@12/+esm';
import createDOMPurify from 'https://cdn.jsdelivr.net/npm/dompurify@3.1.7/+esm';
const DOMPurify = createDOMPurify(window);

DOMPurify.setConfig({
  ADD_TAGS: ['iframe','video','audio','source'],
  ADD_ATTR: ['allow','allowfullscreen','frameborder','scrolling','controls','autoplay','muted','loop','loading'],
  USE_PROFILES: { html: true }
});

marked.setOptions({ gfm:true, breaks:false, mangle:false, headerIds:false });

// TOC
const $root = document.getElementById('md-root');
const $toc = document.getElementById('toc');
function slugify(txt){ return txt.trim().toLowerCase().replace(/\s+/g,'-'); }

function ensureHeadingIds(container){
  container.querySelectorAll('h2,h3,h4').forEach(h=>{
    if(!h.id) h.id = slugify(h.textContent);
  });
}

function buildTOC(container){
  const heads = Array.from(container.querySelectorAll('h2,h3,h4'));
  const ulRoot = document.createElement('ul');
  const stack = [{ level: 1, ul: ulRoot }];
  heads.forEach(h=>{
    const level = parseInt(h.tagName.substring(1),10);
    while(stack[stack.length-1].level >= level) stack.pop();
    const parent = stack[stack.length-1];

    const li = document.createElement('li');
    const row = document.createElement('div'); row.className='toc-item';

    const caret = document.createElement('button');
    caret.className='toc-caret'; caret.type='button';
    caret.innerHTML='<span class="toc-caret-icon">▶</span>';
    caret.setAttribute('aria-expanded','false');

    const a=document.createElement('a'); a.href=`#${h.id}`; a.textContent=h.textContent;

    row.appendChild(caret); row.appendChild(a); li.appendChild(row);

    const sub=document.createElement('ul'); sub.classList.add('is-collapsed'); li.appendChild(sub);
    parent.ul.appendChild(li); stack.push({level,ul:sub,li});
  });

  ulRoot.addEventListener('click',e=>{
    const btn=e.target.closest('.toc-caret'); if(!btn) return;
    const li=btn.closest('li'); const sub=li.querySelector(':scope>ul'); if(!sub) return;
    const isH2 = li.parentElement===ulRoot;
    if(isH2){
      ulRoot.querySelectorAll('>li>ul').forEach(ul=>{ if(ul!==sub) ul.classList.add('is-collapsed'); });
      ulRoot.querySelectorAll('>li>.toc-item>.toc-caret').forEach(c=>{ if(c!==btn) c.setAttribute('aria-expanded','false'); });
    }
    const willCollapse = sub.classList.toggle('is-collapsed');
    btn.setAttribute('aria-expanded',!willCollapse);
  });

  $toc.replaceChildren(ulRoot);
}

function postprocess(container){
  container.querySelectorAll('a[href^="http"]').forEach(a=>{ a.target='_blank'; a.rel='noopener'; });
}

ensureHeadingIds($root);
buildTOC($root);
postprocess($root);
</script>
</body>
</html>

